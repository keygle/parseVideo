<!-- pvdl.md, parse_video/doc/
   - language: Chinese (zh_cn) 
  -->

# pvdl : parse_video Downloader
`pvdl version 0.0.8.0`

**负锐下载** (`pvdl`) 是一个使用 `parse_video` 的 *下载程序* 的 **参考实现**. 


## pvdl 简单说明

+ 目标: *简单*, *稳定*. 

+ 简单: 无过多功能特性. 

+ **单线程**下载 (不考虑下载速度)

+ 支持许多 parse_video 功能特性. (包括 TODO *专用下载器*)

+ 文本界面: **命令行** 和 简单**交互式**. (多种颜色输出)

+ **可配置** 和 **0配置**: 一切可配置的, (只要有用户需要) 都应让用户能够配置. 
  
  *默认配置* 即可在大多数情况下 *正常, 稳定* 工作 (不考虑性能). 
  
  *额外的* (特别是 *不稳定* 或者 *危险* 的) 功能特性 (选项) 必须 **手动开启**. 

+ 无 *日志文件*, **全检测式** 设计. 


## 其它说明

+ 语言: 代码 ASCII 化, 文档 中文. 

+ 错误处理: `log.e()` 输出错误信息 (用户友好), 然后 `raise` (程序友好). 

+ 下载器: 通用下载器 `wget` (默认)
  
  TODO *parse_video* 专用下载器: `pv_tvsohu_http`, `pv_kankan_flv`. 
  
  下载器 应能检测单个文件已完成, 并自动跳过文件. (返回成功)
  
  默认开启 *断点续传*. 

+ 输出颜色:
  
  + 一般: 白
  + 错误: 红
  + 提示: 黄
  + 交互: 高亮白
  + 警告: 橙
  + OK: 蓝


## TODO

达到 `pvdl -> version 0.1.0.0` 还要: 

+ 文档化 TODO


`-> version 0.1.0.0` 之后实现的功能特性: *(优先级)*

+ *(高)* `check_disk_space`: **检查磁盘剩余空间** <br />
  在下载文件之前, 如果剩余空间不足, 会拒绝下载. 

+ *(高)* `fix_size`: **修复解析文件大小** <br />
  当 parse_video 没有解析出 分段文件大小 信息时, 尝试获取. 

+ *(高)* `list`: **下载列表** <br />
  根据列表文件自动下载多个视频. 

+ *(高)* `force_merge`: **强制合并** <br />
  当目标文件已存在时, 删除目标文件, 然后进行合并. 

+ *(高)* `wget`: wget 增强 <br />
  支持 http header, 支持 **下载限速**

+ *(高)* `fix_title_no`: **修复标题序号**
  
  1. 验证 `title_no` 是否存在于 `title` 中, 如不存在, 取消 `title_no`. 
     (用于修复 电影的下载)
  2. 当 *parse_video* 没有获取 `title_no` 信息时, 尝试从 `title` 中获取. 

+ *(高)* `check_remote_size`: **检查服务器文件大小** <br />
  下载分段文件之前, 检查分段文件在服务器上的大小, 避免下载无效的文件. 

+ *(高)* `auto_remove_tmp_part_files`: **自动删除临时分段文件** <br />
  任务完成 (下载完成, 合并完成) 后, 在所需 **检查通过** 的情况下, 
  自动删除 pvdl 下载过程中的 *临时分段文件*. (此功能的目的主要是为了节省磁盘空间, 
  所以其它日志及调试等文件仍然需要手动删除)


+ *(低)* `dl_worker`: **专用下载器** <br />
  支持 (实现) parse_video 专用下载器. 

+ *(低)* `check_permission`: **检查文件写入权限** <br />
  在写入文件 (日志文件, 分段文件, ffmpeg 合并列表文件, 合并输出文件) 之前, 检查是否有写入权限. 

+ *(低)* `enable_more`: **启用 parse_video `--more` 功能** <br />
  加速解析, 在 *再次解析* 时使用. 

+ *(低)* `parse_twice`: **二次解析** (单次解析) <br />
  默认会调用 parse_video 解析 2次. 此特性使解析仅需 1次. 

+ *(低)* `merge_twice`: **二次合并** <br />
  将分段合并到一起之前, 先将每个分段单独自己合并一次. (可能解决某些合并错误)

+ *(低)* `proxy`: **全面的代理支持** <br />
  仅支持 http 代理. (需要 parse_video 配合)


TODO
<!-- end pvdl.md -->


