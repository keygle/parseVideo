/* Zombie.js, parse_video/lib/bks1/o/enc
 * last_update 2015-08-10 22:57 GMT+0800 CST
 */

//	import flash.utils.Dictionary;
//	import flash.utils.getTimer;

//	public class Zombie extends Object

// public static var kcuf:Array = [];
// private static var var_1:Dictionary = null;
// private static var var_2:Object;

var Zombie = {};

var kcuf = [];
var var_1 = null;
var var_2;

// public static function set thd(param1:Object) : void
	function set_thd(param1) {
		if (var_2 == null) {
			var_2 = param1;
		}
	}
	
// public static function bite(param1:String) : Object
	function bite(tvid, flash_tm) {
		
		var param1 = tvid;
		
		var var_7 = null;
		var var_8 = null;
		var var_9 = null;
		var var_10 = null;
		var var_11 = null;
		var var_12 = null;
		var var_13 = null;
		var var_14 = null;
		var var_15 = null;
		var var_16 = null;
		var var_17 = null;
		var var_21 = null;
		var var_22 = null;
		var var_23 = null;
		var var_24 = null;
		var var_25 = null;
		var var_26 = null;
		var var_27 = null;
		var var_28 = null;
		var var_29 = null;
		var var_30 = null;
		var var_31 = null;
		var var_32 = null;
		var var_33 = null;
		var var_34 = null;
		var var_35 = null;
		var var_42 = null;
		var var_43 = null;
		var var_44 = null;
		var var_45 = 0;
		var var_46 = 0;
		var var_47 = 0;
		var var_48 = 0;
		
		var var_4 = param1;
		
		if (var_1 == null) {
			// var_1 = new Dictionary();
			var_1 = {};
		}
		
		var var_5 = function(param1, param2) {
			param1.push(param2);
		};
		
		var var_6 = [];
		
		var_7 = [];
		
		var_8 = function() {
			return var_7.indexOf(var_15);
		};
		var_1["cfcd208495d565ef66e7dff9f98764da"] = var_8;
		
		// NOTE start new Zombie here 2015-08-10
		var_5(var_6,"cfcd208495d565ef66e7dff9f98764da");
		
		var_9 = function() {
			return var_7.indexOf(var_10);
		};
		var_1["c4ca4238a0b923820dcc509a6f75849b"] = var_9;
		var_5(var_6,"8fa14cdd754f91cc6554c9e71929cce7");
		var_5(var_6,"92eb5ffee6ae2fec3ad71c777531578f");
		var_5(var_6,"e4da3b7fbbce2345d7772b0674a318d5");
		var_5(var_6,"e1671797c52e15f763380b45e841ec32");
		
		var_10 = function() {
			return var_7.indexOf(var_16);
		};
		var_1["c81e728d9d4c2f636f067f89cc14862c"] = var_10;
		var_5(var_6,"0cc175b9c0f1b6a831c399e269772661");
		var_5(var_6,"c4ca4238a0b923820dcc509a6f75849b");
		
		var_11 = function() {
			return var_7.indexOf(var_8);
		};
		var_1["eccbc87e4b5ce2fe28308fd9f2a7baf3"] = var_11;
		var_5(var_6,"c81e728d9d4c2f636f067f89cc14862c");
		var_5(var_6,"92eb5ffee6ae2fec3ad71c777531578f");
		var_5(var_6,"8f14e45fceea167a5a36dedd4bea2543");
		var_5(var_6,"c9f0f895fb98ab9159f51fd0297e236d");
		var_5(var_6,"4a8a08f09d37b73795649038408b5f33");
		
		var_12 = function() {
			return var_7.indexOf(var_34);
		};
		var_1["a87ff679a2f3e71d9181a67b7542122c"] = var_12;
		var_5(var_6,"c9f0f895fb98ab9159f51fd0297e236d");
		var_5(var_6,"8fa14cdd754f91cc6554c9e71929cce7");
		
		var_13 = function() {
			return var_7.indexOf(var_11);
		};
		var_1["e4da3b7fbbce2345d7772b0674a318d5"] = var_13;
		var_5(var_6,"8fa14cdd754f91cc6554c9e71929cce7");
		var_5(var_6,"c4ca4238a0b923820dcc509a6f75849b");
		var_5(var_6,"45c48cce2e2d7fbdea1afc51c7c6ad26");
		var_5(var_6,"c9f0f895fb98ab9159f51fd0297e236d");
		
		var_14 = function() {
			return var_7.indexOf(var_26);
		};
		var_1["1679091c5a880faf6fb5e6087eb1b2dc"] = var_14;
		var_5(var_6,"45c48cce2e2d7fbdea1afc51c7c6ad26");
		var_5(var_6,"a87ff679a2f3e71d9181a67b7542122c");
		var_5(var_6,"eccbc87e4b5ce2fe28308fd9f2a7baf3");
		var_5(var_6,"e4da3b7fbbce2345d7772b0674a318d5");
		
		var_15 = function() {
			return var_7.indexOf(var_9);
		};
		var_1["8f14e45fceea167a5a36dedd4bea2543"] = var_15;
		var_5(var_6,"92eb5ffee6ae2fec3ad71c777531578f");
		var_5(var_6,"8f14e45fceea167a5a36dedd4bea2543");
		var_5(var_6,"c4ca4238a0b923820dcc509a6f75849b");
		var_5(var_6,"e4da3b7fbbce2345d7772b0674a318d5");
		var_5(var_6,"c4ca4238a0b923820dcc509a6f75849b");
		
		var_16 = function() {
			return var_7.indexOf(var_23);
		};
		var_1["c9f0f895fb98ab9159f51fd0297e236d"] = var_16;
		var_5(var_6,"c4ca4238a0b923820dcc509a6f75849b");
		var_5(var_6,"92eb5ffee6ae2fec3ad71c777531578f");
		
		var_17 = function() {
			return var_7.indexOf(var_12);
		};
		var_1["45c48cce2e2d7fbdea1afc51c7c6ad26"] = var_17;
		var_5(var_6,"92eb5ffee6ae2fec3ad71c777531578f");
		var_5(var_6,"eccbc87e4b5ce2fe28308fd9f2a7baf3");
		var_5(var_6,"8f14e45fceea167a5a36dedd4bea2543");
		// NOTE end new Zombie here 2015-08-10
		
		var var_18 = function(param1) {
			return String.fromCharCode(param1);
		};
		var var_19 = function(param1) {
			return param1 > 0;
		};
		var var_20 = function(param1, param2) {
			var_5(param1,param2);
		};
		
		var_21 = [];
		if ('0' < '1') {
			var_42 = function() {
				return var_7.indexOf(var_42);
			};
			var_43 = function() {
				return var_7.indexOf(var_31);
			};
		}
		
		var_1["0cc175b9c0f1b6a831c399e269772661"] = var_42;
		var_1["92eb5ffee6ae2fec3ad71c777531578f"] = var_43;
		
		var_22 = function() {
			return var_7.indexOf(var_22);
		};
		var_23 = function() {
			return var_7.indexOf(var_13);
		};
		var_24 = function() {
			return var_7.indexOf(var_24);
		};
		var_25 = function() {
			return var_7.indexOf(var_25);
		};
		var_26 = function() {
			return var_7.indexOf(var_17);
		};
		var_27 = function() {
			return var_7.indexOf(var_27);
		};
		var_28 = function() {
			return var_7.indexOf(var_28);
		};
		var_29 = function() {
			return var_7.indexOf(var_29);
		};
		var_30 = function() {
			return var_7.indexOf(var_30);
		};
		var_31 = function() {
			return var_7.indexOf(var_43);
		};
		var_32 = function() {
			return var_7.indexOf(var_32);
		};
		var_33 = function() {
			return var_7.indexOf(var_33);
		};
		var_34 = function() {
			return var_7.indexOf(var_14);
		};
		var_35 = function() {
			return var_7.indexOf(var_35);
		};
		
		var_1["4a8a08f09d37b73795649038408b5f33"] = var_23;
		var_1["8277e0910d750195b448797616e091ad"] = var_26;
		
		var_7.push(var_8);
		var_7.push(var_9);
		var_7.push(var_10);
		var_7.push(var_11);
		var_7.push(var_12);
		var_7.push(var_13);
		var_7.push(var_14);
		var_7.push(var_15);
		var_7.push(var_16);
		var_7.push(var_17);
		var_7.push(var_42);
		var_7.push(var_43);
		var_7.push(var_23);
		var_7.push(var_26);
		var_7.push(var_31);
		var_7.push(var_34);
		
		var_1["e1671797c52e15f763380b45e841ec32"] = var_31;
		var_1["8fa14cdd754f91cc6554c9e71929cce7"] = var_34;
		
		var_7.push(var_22);
		var_7.push(var_24);
		var_7.push(var_25);
		var_7.push(var_35);
		var_7.push(var_32);
		var_7.push(var_33);
		var_7.push(var_28);
		
		while (var_6.length) {
			var_5(var_21,var_1[var_6.shift()]());
		}
		
		var var_36 = var_21.join('') + "7b11c5408ff342318da3e7c97b92e890";
		
		var var_37 = 0;
		while (var_37 < var_21.length) {
			// NOTE AObject and kcuf used here
			var_21[var_37] = var_2['pam']([kcuf[var_21[var_37]]()]);
			var_37 ++;
		}
		
		// var var_38:uint = getTimer();
		var var_38 = flash_tm;
		
		// NOTE get salt here
		var _tmp_salt = var_21.join('');
		
		var_5(var_21,var_38);
		var_5(var_21,var_4);
		
		// NOTE main md5_hash function here
		var var_39 = function(param1) {
			var k = null;
			var name_2 = 0;
			var name_1 = param1;
			k = [];
			name_2 = 16;
			var t = 0;
			while (t < name_2 << 2) {
				k[t] = 0 | Math.abs(Math.sin(++t)) * 4.294967296E9;
			}
			var add = function(param1, param2) {
				return ((param1 >> 1) + (param2 >> 1) << 1) + (param1 & 1) + (param2 & 1);
			};
			var msg = function() {
				var _loc1 = NaN;
				var _loc2 = NaN;
				var _loc3 = NaN;
				var _loc5 = 0;
				var _loc15 = null;
				var _loc4 = 0;
				var _loc6 = [];
				var _loc7 = unescape(encodeURI(name_1));
				var _loc8 = _loc7.length;
				var _loc9 = [_loc1 = 1732584193,_loc2 = -271733879,~_loc1,~_loc2];
				var _loc10 = [0.0,0.0,0.0,0.0];
				var _loc11 = [0,0,0,0];
				var _loc12 = [7,4 * 3,17,22,5,3 * 3,14,20,4,11,name_2,23,2 * 3,10,5 * 3,7 * 3];
				while (_loc4 <= _loc8) {
					_loc6[_loc4 >> 2] = _loc6[_loc4 >> 2] | (_loc7.charCodeAt(_loc4) || 1 << 7) << 8 * (_loc4++ % 4);
				}
				var _loc13 = (1 + (_loc8 + 8 >> 6)) * name_2 - 2;
				_loc6[_loc13] = _loc8 * 8;
				_loc4 = 0;
				while (_loc4 < _loc13) {
					_loc15 = _loc9.concat();
					_loc5 = 0;
					while (_loc5 < name_2 * 4) {
						_loc3 = _loc15[3];
						_loc1 = _loc15[1];
						_loc10[0] = _loc1 & (_loc2 = _loc15[2]) | ~_loc1 & _loc3;
						_loc10[1] = _loc3 & _loc1 | ~_loc3 & _loc2;
						_loc10[2] = _loc1 ^ _loc2 ^ _loc3;
						_loc10[3] = _loc2 ^ (_loc1 | ~_loc3);
						_loc11[0] = _loc5;
						_loc11[1] = 5 * _loc5 + 1;
						_loc11[2] = 3 * _loc5 + 5;
						_loc11[3] = 7 * _loc5;
						_loc15 = [_loc3 = _loc15[3],add(_loc1 = _loc15[1],(_loc3 = add(add(_loc15[0],_loc10[_loc8 = _loc5 >> 4]),add(k[_loc5],_loc6[_loc11[_loc8] % name_2 + _loc4]))) << (_loc8 = _loc12[4 * _loc8 + _loc5++ % 4]) | _loc3 >>> 32 - _loc8),_loc1,_loc2];
					}
					_loc5 = Math.sqrt(name_2);
					while (_loc5) {
						_loc9[--_loc5] = add(_loc9[_loc5],_loc15[_loc5]);
					}
					_loc4 = _loc4 + name_2;
				}
				var _loc14 = '';
				while (_loc5 < 32) {
					_loc14 = _loc14 + (_loc9[_loc5 >> 3] >> (1 ^ _loc5++ & 7) * 4 & 15).toString(name_2);
				}
				return _loc14;
			};
			return msg();
		};	// NOTE main md5_hash function ended
		
		// var var_41 = var_39(var_21.join(''));
		var _tmp_raw = var_21.join('');
		var var_41 = var_39(_tmp_raw);
		
		var var_40 = {};
		if (var_41.length > 4) {
			var_40.src = 'eknas';
			var_40.tm = var_38;
			var_40.sc = var_41;
		}
		
		// NOTE add by me here
		var_40.raw = _tmp_raw;
		var_40.salt = _tmp_salt;
		
		return var_40;
	}

// functions for DEBUG

	function get_kcuf() {
		return kcuf;
	}
	
	function set_kcuf(to) {
		kcuf = to;
	}
	
	function get_var_2() {
		return var_2;
	}

/* try to export for node.js */
try {
	// DEBUG function
	exports.get_kcuf = get_kcuf;	// get_kcuf();
	exports.set_kcuf = set_kcuf;	// set_kcuf(to);
	
	exports.get_var_2 = get_var_2;	// get_var_2();
	
	// core functions
	exports.set_thd = set_thd;	// set_thd(AObject);	// set_var_2(), here
	
	exports.bite = bite;	// Zombie.bite(tvid, flash_tm);
} catch (e) {
}

/* end Zombie.js */


